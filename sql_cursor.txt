--커서를 사용하여 부서 테이블의 모든 내용을 출력
CREATE OR REPLACE PROCEDURE CURSOR_SAMPLE01
IS
 VDEPT DEPT%ROWTYPE;
 CURSOR C1
 IS
 SELECT * FROM DEPT;
BEGIN
 DBMS_OUTPUT.PUT_LINE('부서번호 / 부서명 / 지역명');
 DBMS_OUTPUT.PUT_LINE('-----------------------');

 OPEN C1;
 LOOP
 FETCH C1 INTO /*VDEPT.DEPTNO, VDEPT.DNAME, VDEPT.LOC*/VDEPT;

 EXIT WHEN C1%NOTFOUND;

 DBMS_OUTPUT.PUT_LINE(VDEPT.DEPTNO||
 ' '||VDEPT.DNAME||' '||VDEPT.LOC);
 END LOOP;

 CLOSE C1;
END;
/ 
EXECUTE CURSOR_SAMPLE01;
--커서를 사용하여 부서번호에 따라 사원 정보 테이블의 모든 내용을 출력
CREATE OR REPLACE PROCEDURE CURSOR_SAMPLE02(VDEPTNO IN EMP.DEPTNO%TYPE)
IS
 VEMP EMP%ROWTYPE;
 CURSOR C1
 IS
 SELECT * 
 FROM EMP
 WHERE DEPTNO=VDEPTNO;
 
BEGIN
 DBMS_OUTPUT.PUT_LINE('사원번호/사원 명/직업/상관/입사일/급여/보너스/부서번호 ');
 DBMS_OUTPUT.PUT_LINE('-----------------------------------------------------------------');

 OPEN C1;
 LOOP
 FETCH C1 
 INTO/* VEMP.EMPNO,VEMP.ENAME,VEMP.JOB,VEMP.MGR,VEMP.HIREDATE,VEMP.SAL,VEMP.COMM,VEMP.DEPTNO*/VEMP;
 EXIT WHEN C1%NOTFOUND;
 DBMS_OUTPUT.PUT_LINE(VEMP.EMPNO||
 ' '||VEMP.ENAME||' '||VEMP.JOB||' ' ||VEMP.MGR||' ' ||VEMP.HIREDATE||' ' ||VEMP.SAL||' ' ||VEMP.COMM||' ' ||VEMP.DEPTNO);

 END LOOP;

 CLOSE C1;
END;
/ 
EXECUTE CURSOR_SAMPLE02(30);


--위에 02번을 FOR문으로 바꾸기
CREATE OR REPLACE PROCEDURE CURSOR_SAMPLE03(VDEPTNO IN EMP.DEPTNO%TYPE)
IS
 VEMP EMP%ROWTYPE;
 CURSOR C1
 IS
 SELECT * 
 FROM EMP
 WHERE DEPTNO=VDEPTNO;
 
BEGIN
 DBMS_OUTPUT.PUT_LINE('사원번호/사원 명/직업/상관/입사일/급여/보너스/부서번호 ');
 DBMS_OUTPUT.PUT_LINE('-----------------------------------------------------------------');

 FOR VEMP IN C1 LOOP
  EXIT WHEN C1%NOTFOUND;
  DBMS_OUTPUT.PUT_LINE
  (VEMP.EMPNO||' '||VEMP.ENAME||' '||VEMP.JOB||' ' ||VEMP.MGR||' ' ||VEMP.HIREDATE||' ' ||VEMP.SAL||' ' ||VEMP.COMM||' ' ||VEMP.DEPTNO);
 END LOOP;
END;
/ 
EXECUTE CURSOR_SAMPLE03(20);