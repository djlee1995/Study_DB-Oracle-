--부서번호를 전달 받아 해당 부서에 근무하는 사원의 사원번호, 이름 ,부서명,지역,급여를
--급여가 많은 순으로 출력하시오
--<처리조건>
--레코드 타입을 정의해서 작성할 것

CREATE OR REPLACE PROCEDURE CURSOR_EXAM(VDEPTNO IN EMP.DEPTNO%TYPE)
IS
TYPE E_D_RECORD_TYPE IS RECORD
(V_EMPNO EMP.EMPNO%TYPE,
 V_ENAME EMP.ENAME%TYPE,
 V_DNAME DEPT.DNAME%TYPE,
 V_LOC DEPT.LOC%TYPE,
 V_SAL EMP.SAL%TYPE
);
E_D_REC  E_D_RECORD_TYPE;
 CURSOR C1
 IS
 SELECT EMPNO,ENAME,DNAME,LOC,SAL
 FROM EMP,DEPT
 WHERE EMP.DEPTNO = DEPT.DEPTNO 
 AND EMP.DEPTNO=VDEPTNO
 ORDER BY SAL DESC;
 
BEGIN
DBMS_OUTPUT.PUT_LINE('사원번호/이름/부서명/지역/급여 ');
DBMS_OUTPUT.PUT_LINE('---------------------------------------------- ');

 FOR E_D_REC IN C1 LOOP
  EXIT WHEN C1%NOTFOUND;
  DBMS_OUTPUT.PUT_LINE
  (E_D_REC.EMPNO||'  '||E_D_REC.ENAME||'  '||E_D_REC.DNAME||'  ' ||E_D_REC.LOC||'  ' ||E_D_REC.SAL);
 END LOOP;
END;
/ 
EXECUTE CURSOR_EXAM(30);